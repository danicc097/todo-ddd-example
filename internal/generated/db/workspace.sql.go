// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: workspace.sql

package db

import (
	"context"
	"time"

	"github.com/google/uuid"
)

const AddWorkspaceMember = `-- name: AddWorkspaceMember :exec
INSERT INTO workspace_members(workspace_id, user_id, role)
  VALUES ($1, $2, $3)
`

type AddWorkspaceMemberParams struct {
	WorkspaceID uuid.UUID `db:"workspace_id" json:"workspace_id"`
	UserID      uuid.UUID `db:"user_id" json:"user_id"`
	Role        string    `db:"role" json:"role"`
}

func (q *Queries) AddWorkspaceMember(ctx context.Context, db DBTX, arg AddWorkspaceMemberParams) error {
	_, err := db.Exec(ctx, AddWorkspaceMember, arg.WorkspaceID, arg.UserID, arg.Role)
	return err
}

const CreateWorkspace = `-- name: CreateWorkspace :one
INSERT INTO workspaces(id, name, description, created_at)
  VALUES ($1, $2, $3, $4)
RETURNING
  id, name, description, created_at
`

type CreateWorkspaceParams struct {
	ID          uuid.UUID `db:"id" json:"id"`
	Name        string    `db:"name" json:"name"`
	Description string    `db:"description" json:"description"`
	CreatedAt   time.Time `db:"created_at" json:"created_at"`
}

func (q *Queries) CreateWorkspace(ctx context.Context, db DBTX, arg CreateWorkspaceParams) (Workspaces, error) {
	row := db.QueryRow(ctx, CreateWorkspace,
		arg.ID,
		arg.Name,
		arg.Description,
		arg.CreatedAt,
	)
	var i Workspaces
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Description,
		&i.CreatedAt,
	)
	return i, err
}

const DeleteWorkspace = `-- name: DeleteWorkspace :exec
DELETE FROM workspaces
WHERE id = $1
`

func (q *Queries) DeleteWorkspace(ctx context.Context, db DBTX, id uuid.UUID) error {
	_, err := db.Exec(ctx, DeleteWorkspace, id)
	return err
}

const GetWorkspaceByID = `-- name: GetWorkspaceByID :one
SELECT
  id, name, description, created_at
FROM
  workspaces
WHERE
  id = $1
`

func (q *Queries) GetWorkspaceByID(ctx context.Context, db DBTX, id uuid.UUID) (Workspaces, error) {
	row := db.QueryRow(ctx, GetWorkspaceByID, id)
	var i Workspaces
	err := row.Scan(
		&i.ID,
		&i.Name,
		&i.Description,
		&i.CreatedAt,
	)
	return i, err
}

const GetWorkspaceMembers = `-- name: GetWorkspaceMembers :many
SELECT
  workspace_id, user_id, role
FROM
  workspace_members
WHERE
  workspace_id = $1
`

func (q *Queries) GetWorkspaceMembers(ctx context.Context, db DBTX, workspaceID uuid.UUID) ([]WorkspaceMembers, error) {
	rows, err := db.Query(ctx, GetWorkspaceMembers, workspaceID)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []WorkspaceMembers{}
	for rows.Next() {
		var i WorkspaceMembers
		if err := rows.Scan(&i.WorkspaceID, &i.UserID, &i.Role); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const ListWorkspaces = `-- name: ListWorkspaces :many
SELECT
  id, name, description, created_at
FROM
  workspaces
ORDER BY
  created_at DESC
`

func (q *Queries) ListWorkspaces(ctx context.Context, db DBTX) ([]Workspaces, error) {
	rows, err := db.Query(ctx, ListWorkspaces)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []Workspaces{}
	for rows.Next() {
		var i Workspaces
		if err := rows.Scan(
			&i.ID,
			&i.Name,
			&i.Description,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
